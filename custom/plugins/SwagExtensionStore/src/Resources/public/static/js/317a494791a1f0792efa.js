(window["webpackJsonpPluginswag-extension-store"]=window["webpackJsonpPluginswag-extension-store"]||[]).push([[562],{5180:function(){},2562:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r}}),n(8791);let{Criteria:i}=Shopware.Data;var r={template:'{% block sw_extension_store_listing_filter %}\n    <div class="sw-extension-store-listing-filter">\n        <template v-if="!isLoading">\n            {% block sw_extension_store_listing_filter_content %}\n                {% block sw_extension_store_listing_filter_sorting %}\n                    <sw-meteor-single-select\n                        class="sw-extension-store-listing-filter__sorting"\n                        size="small"\n                        :label="$tc(\'sw-extension.store.listing.sort\')"\n                        :options="sortingOptions"\n                        valueProperty="orderIdentifier"\n                        :value="sortingValue"\n                        @update:value="setSelectedSorting"\n                    >\n                    </sw-meteor-single-select>\n                {% endblock %}\n\n                {% block sw_extension_store_listing_all_filters %}\n                    <sw-meteor-single-select\n                        v-for="filter in listingFiltersSorted"\n                        class="sw-extension-store-listing-filter__filters"\n                        :key="filter.name"\n                        size="small"\n                        :label="filter.label"\n                        :options="getOptionsForFilter(filter)"\n                        :value="getValueForFilter(filter)"\n                        @update:value="changeValueForFilter(filter, $event)"\n                    >\n                        <template v-if="filter.type === \'category\'"\n                                  #result-label-property="{ item, valueProperty }">\n                            {% block sw_extension_store_listing_filter_category_filter_result %}\n                                <div v-if="item[valueProperty] !== null"\n                                     :class="{ \'is--root-category\': isRootCategory(item) }"\n                                     :style="{ \'padding-left\': isRootCategory(item) ? \'0\': `${categoryDepth(item)}em` }">\n                                    {{ item.label }}\n                                </div>\n                            {% endblock %}\n                        </template>\n                    </sw-meteor-single-select>\n                {% endblock %}\n            {% endblock %}\n        </template>\n        <template v-else>\n            <sw-loader></sw-loader>\n        </template>\n    </div>\n{% endblock %}\n',mixins:["notification"],inject:["extensionStoreDataService","feature"],data(){return{isLoading:!0,listingFilters:[],listingSorting:{}}},computed:{search(){return Shopware.State.get("shopwareExtensions").search},activeFilters:{get(){return Shopware.State.get("shopwareExtensions").search.filter},set(e){Shopware.State.get("shopwareExtensions").search.filter=e}},sortingOptions(){return this.listingSorting.options?this.listingSorting.options.map(e=>(e.orderIdentifier=`${e.orderBy}##${e.orderSequence}`,e)):[]},defaultSortingValue(){return this.listingSorting.default?`${this.listingSorting.default.orderBy}##${this.listingSorting.default.orderSequence}`:null},sortingValue(){let e=this.search.sorting&&this.search.sorting.field,t=this.search.sorting&&this.search.sorting.order;return e&&t?`${e}##${t}`:this.defaultSortingValue},listingFiltersSorted(){let e=[...this.listingFilters];e.sort((e,t)=>e.position-t.position),e.forEach(e=>{e.options.sort((e,t)=>e.position-t.position)});let t=e.find(e=>"category"===e.type);return t&&(t.options=this.getOrderedCategories(t.options)),e}},created(){this.createdComponent()},methods:{createdComponent(){this.fetchListingFilters()},fetchListingFilters(){return this.extensionStoreDataService.listingFilters().then(({filter:e,sorting:t})=>{this.listingFilters=e,this.listingSorting=t}).catch(e=>{this.createNotificationError({message:e})}).finally(()=>{this.isLoading=!1})},getValueForFilter(e){return this.activeFilters[e.name]||null},changeValueForFilter(e,t){if(!t){this.$delete(this.activeFilters,e.name);return}this.activeFilters[e.name]=t},getOptionsForFilter(e){return[{label:this.$tc("sw-extension.store.listing.anyOption"),value:null},...e.options]},setSelectedSorting(e){let[t,n]=e.split("##");Shopware.State.commit("shopwareExtensions/setSearchValue",{key:"sorting",value:i.sort(t,n)})},isRootCategory(e){return null===e.parent||void 0===e.parent},categoryDepth(e){let t=0,n=this.getCategoryByName(e.parent);for(;n;)t+=1,n=this.getCategoryByName(n.parent)?this.getCategoryByName(n.parent):null;return t},getCategoryByName(e){return this.listingFilters.find(e=>"category"===e.type).options.find(t=>t.label===e||t.value===e||t.name===e)},getOrderedCategories(e){let t=new Map;return t.set(null,{value:null,children:[]}),e.forEach(e=>{t.set(e.value,{value:e,children:[]})}),e.forEach(e=>{t.get(e.parent).children.push(t.get(e.value))}),this.flatTree(t.get(null))},flatTree(e){let t=e.value?[e.value]:[];return e.children.sort((e,t)=>e.value.position-t.value.position).forEach(e=>t.push(...this.flatTree(e))),t}}}},8791:function(e,t,n){var i=n(5180);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[e.id,i,""]]),i.locals&&(e.exports=i.locals),(0,n(534).A)("b6ee97f4",i,!0,{})},534:function(e,t,n){"use strict";function i(e,t){for(var n=[],i={},r=0;r<t.length;r++){var s=t[r],o=s[0],l={id:e+":"+r,css:s[1],media:s[2],sourceMap:s[3]};i[o]?i[o].parts.push(l):n.push(i[o]={id:o,parts:[l]})}return n}n.d(t,{A:function(){return h}});var r,s="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!s)throw Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var o={},l=s&&(document.head||document.getElementsByTagName("head")[0]),a=null,u=0,c=!1,d=function(){},g=null,p="data-vue-ssr-id",f="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function h(e,t,n,r){c=n,g=r||{};var s=i(e,t);return v(s),function(t){for(var n=[],r=0;r<s.length;r++){var l=o[s[r].id];l.refs--,n.push(l)}t?v(s=i(e,t)):s=[];for(var r=0;r<n.length;r++){var l=n[r];if(0===l.refs){for(var a=0;a<l.parts.length;a++)l.parts[a]();delete o[l.id]}}}}function v(e){for(var t=0;t<e.length;t++){var n=e[t],i=o[n.id];if(i){i.refs++;for(var r=0;r<i.parts.length;r++)i.parts[r](n.parts[r]);for(;r<n.parts.length;r++)i.parts.push(y(n.parts[r]));i.parts.length>n.parts.length&&(i.parts.length=n.parts.length)}else{for(var s=[],r=0;r<n.parts.length;r++)s.push(y(n.parts[r]));o[n.id]={id:n.id,refs:1,parts:s}}}}function m(){var e=document.createElement("style");return e.type="text/css",l.appendChild(e),e}function y(e){var t,n,i=document.querySelector("style["+p+'~="'+e.id+'"]');if(i){if(c)return d;i.parentNode.removeChild(i)}if(f){var r=u++;t=S.bind(null,i=a||(a=m()),r,!1),n=S.bind(null,i,r,!0)}else t=_.bind(null,i=m()),n=function(){i.parentNode.removeChild(i)};return t(e),function(i){i?(i.css!==e.css||i.media!==e.media||i.sourceMap!==e.sourceMap)&&t(e=i):n()}}var w=(r=[],function(e,t){return r[e]=t,r.filter(Boolean).join("\n")});function S(e,t,n,i){var r=n?"":i.css;if(e.styleSheet)e.styleSheet.cssText=w(t,r);else{var s=document.createTextNode(r),o=e.childNodes;o[t]&&e.removeChild(o[t]),o.length?e.insertBefore(s,o[t]):e.appendChild(s)}}function _(e,t){var n=t.css,i=t.media,r=t.sourceMap;if(i&&e.setAttribute("media",i),g.ssrId&&e.setAttribute(p,t.id),r&&(n+="\n/*# sourceURL="+r.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */"),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}}}]);